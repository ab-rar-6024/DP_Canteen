<!DOCTYPE html>
<html>
<head>
<title>Canteen Kiosk</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
html, body {
    height: 100%;
}

body{
    background: linear-gradient(rgba(0,0,0,.6), rgba(0,0,0,.6)),
    url("https://images.unsplash.com/photo-1555992336-03a23c6b8a5b");
    background-size: cover;
    color:#fff;
    display:flex;
    flex-direction:column;
}

.main-content { flex:1; padding:25px; }

.header {
    text-align:center;
    font-weight:700;
    font-size:26px;
}

.card-glass{
    background:rgba(255,255,255,.95);
    border-radius:16px;
    box-shadow:0 15px 35px rgba(0,0,0,.45);
    color:#000;
}

/* PIN */
.pin-display {
    height:55px;
    border:1px solid #ccc;
    border-radius:8px;
    font-size:28px;
    letter-spacing:10px;
    text-align:center;
    margin-bottom:20px;
    padding-top:6px;
}

/* KEYPAD */
.keypad-grid {
    display:grid;
    grid-template-columns:repeat(3,90px);
    gap:18px;
    justify-content:center;
}

.keypad-grid button {
    width:90px;
    height:90px;
    font-size:26px;
    border-radius:10px;
    border:none;
    background:#1f262c;
    color:white;
}

.btn-clear { background:#7a7f84!important; }
.btn-submit { background:#e63946!important; font-weight:bold; }

/* FADE */
.fade-out {
    animation: fadeOut .6s forwards;
}
@keyframes fadeOut {
    to { opacity:0; transform:scale(.95); }
}

.footer-bar{
    background:#0b1c2d;
    color:#00e5ff;
    text-align:center;
    padding:14px;
    font-weight:600;
}
</style>
</head>

<body>

<div class="main-content" id="mainBox">

<div class="text-center mb-3">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/DP_World_logo.svg/2560px-DP_World_logo.svg.png" height="40">
    <div class="header">CCT CANTEEN</div>
</div>

<div class="row g-4">

<!-- WASTAGE -->
<div class="col-md-3">
<div class="card-glass p-3">
<h6><i class="fa fa-trash"></i> Yesterday's Wastage</h6>
<table class="table table-sm">
<tr><td>Breakfast</td><td>{{ wastage.breakfast }} Kg</td></tr>
<tr><td>Lunch</td><td>{{ wastage.lunch }} Kg</td></tr>
<tr><td>Snacks</td><td>{{ wastage.snacks }} Kg</td></tr>
<tr><td>Dinner</td><td>{{ wastage.dinner }} Kg</td></tr>
<tr><td>Supper</td><td>{{ wastage.supper }} Kg</td></tr>
<tr class="fw-bold"><td>Total</td><td>{{ wastage.total }} Kg</td></tr>
</table>

</div>
</div>

<!-- PIN -->
<div class="col-md-6">
<div class="card-glass p-4 text-center">
<h5>Swipe Card / Enter PIN</h5>

<form method="POST" onsubmit="animateExit()">
<div class="pin-display" id="pinDisplay">****</div>
<input type="hidden" name="pin" id="pin">

<div class="keypad-grid">
<button type="button" onclick="add('1')">1</button>
<button type="button" onclick="add('2')">2</button>
<button type="button" onclick="add('3')">3</button>
<button type="button" onclick="add('4')">4</button>
<button type="button" onclick="add('5')">5</button>
<button type="button" onclick="add('6')">6</button>
<button type="button" onclick="add('7')">7</button>
<button type="button" onclick="add('8')">8</button>
<button type="button" onclick="add('9')">9</button>
<button type="button" class="btn-clear" onclick="clr()">C</button>
<button type="button" onclick="add('0')">0</button>
<button type="submit" class="btn-submit">✔</button>
</div>
</form>

{% if error %}
<div class="text-danger mt-2">{{ error }}</div>
{% endif %}
</div>
</div>

<!-- MENU + ORDERS -->
<div class="col-md-3">
<div class="card-glass p-3 mb-3">
<h6><i class="fa fa-utensils"></i> Current Menu</h6>
<ul class="list-group list-group-flush">
{% for m in menu %}
<li class="list-group-item">{{ m.meal_type }} - {{ m.item_name }}</li>
{% endfor %}
</ul>
</div>

<div class="card-glass p-3">
<h6><i class="fa fa-list"></i> Last 7 Orders</h6>
<table class="table table-sm">
{% for o in orders %}
<tr><td>{{ o.item }}</td></tr>
{% endfor %}
</table>
</div>
</div>

</div>
</div>

<div class="footer-bar">
LOVE & FOOD ARE MEANT FOR SHARING — NOT FOR WASTAGE
</div>

<script>
let pin="";
function add(n){ if(pin.length<4){ pin+=n; update(); } }
function clr(){ pin=""; update(); }
function update(){
    document.getElementById("pin").value=pin;
    document.getElementById("pinDisplay").innerText="*".repeat(pin.length);
}
function animateExit(){
    document.getElementById("mainBox").classList.add("fade-out");
}
</script>

</body>
</html>
